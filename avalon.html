<head>
  <title>Avalon</title>
</head>

<body>
  {{> main}}
</body>

<template name="main">
  <div class="container">
    {{> score}}
    {{> Template.dynamic template=whichView}}
    <hr>

    <!-- {{> footer }} -->
  </div>
</template>

<template name="score">
  {{#if game}}
    <div class="score">
      <div class="score-box">{{missionNum round=1}}</div>
      <div class="score-box">{{missionNum round=2}}</div>
      <div class="score-box">{{missionNum round=3}}</div>
      <div class="score-box">{{missionNum round=4}}</div>
      <div class="score-box">{{missionNum round=5}}</div>
    </div>
  {{/if}}
</template>

<template name="startMenu">
  <div class="main-menu">
    <h3>Welcome to Avalon</h3>

    <div class="button-container">
      <button class="button-new-game">New Game</button>
      <button class="button-join-game">Join Game</button>
    </div>

  </div>
</template>

<template name="newGame">
  <div class="new-game">
    <h3>New Game</h3>

    <form class="new-game-form">
      <input class="name-input" type="text" placeholder="Name">
    </form>
    <div class="button-container">
      <button class="button-create">Join</button>
      <button class="button-main-menu">Back</button>
    </div>
  </div>
</template>

<template name="joinGame">
  <div class="join-game">
    <h3>Join Game</h3>

    <form class="join-game-form">
      <input class="code-input" type="text" placeholder="Access Code">
      <input class="name-input" type="text" placeholder="Name">

      <div class="button-container">
        <button type="submit" class="button-join">Join</button>
        <button class="button-main-menu">Back</button>
      </div>
    </form>

  </div>
</template>

<template name="lobby">
  <div class="lobby">
    <h3>Lobby</h3>
    <p>Access Code: {{code}}</p>
    <ul>
      {{#each players}}
        <li>{{ name }}</li>
      {{/each}}
    </ul>

    <div class="button-container">
      <button class="button-start">Start</button>
      <button class="button-leave">Leave</button>
    </div>
  </div>
</template>

<template name="rolePhase">
  <div class="role-phase">
    <h3>Role Phase</h3>
    <p>Your team: {{player.team}}</p>

    {{#if isSpy}}
    <ul>
      {{#each allSpies}}
        <li>{{name}}</li>
      {{/each}}
    </ul>
    {{/if}}

    <p><b>Ready up!</b></p>
    <ul>
      {{#each players}}
        <li class="{{#if ready}}ready{{/if}}">{{name}}</li>
      {{/each}}
    </ul>
    <button type="submit">Ready</button>
  </div>
</template>

<template name="pickPhase">
  <style media="screen">
    {{#if chosen}}
      .container {
        background-color: #D7E4F3;
      }
    {{/if}}
  </style>
  <div class="pick-phase">
    <h3>Pick Phase</h3>
    {{> voteResults}}

    {{#each chosenPlayers}}
      <li>{{name}}</li>
    {{/each}}
  </div>
</template>

<template name="pickPhaseLeader">
  <style media="screen">
    {{#if chosen}}
      body {
        background-color: blue;
      }
    {{/if}}
  </style>
  <div class="pick-phase">
    <h3>Pick Phase</h3>
    {{> voteResults}}

    <p><b>You are the leader!</b> Tap on the names to choose a team.</p>
    <ul>
      {{#each players}}
        {{> player}}
      {{/each}}
    </ul>
    <button>Submit</button>
  </div>
</template>

<template name="player">
  <li class="player {{#if chosen}}chosen{{/if}}">
    {{name}}
  </li>
</template>

<template name="votingPhase">
  <div class="voting-phase">
    <h3>Voting Phase</h3>
  </div>

  <p><b>Current Team</b></p>
  <ul>
    {{#each chosenPlayers}}
      <li>{{name}}</li>
    {{/each}}
  </ul>

  <p><b>Currently Voting:</b></p>
  <ul>
    {{#each players}}
      {{#unless vote}}
        <li>{{ name }}</li>
      {{/unless}}
    {{/each}}
  </ul>

  {{#if playerVote}}
    <p>You are voting: {{ playerVote }}</p>
  {{/if}}

  <div class="button-container">
    <button class="button-accept">Accept</button>
    <button class="button-reject">Reject</button>
  </div>
</template>

<template name="missionPhase">
  <div class="mission-phase">
    <h3>Mission time!</h3>

    {{> voteResults}}
  </div>
</template>

<template name="missionPhaseChosen">
  <div class="mission-phase">
    <h3>Mission time!</h3>

    {{> voteResults}}

    <div class="button-container">
      <button class="button-pass">Pass</button>
      <button class="button-fail">Fail</button>
    </div>
  </div>
</template>

<template name="voteResults">
  {{#if exists}}
    <h3>Previous Vote Results</h3>

    <p><b>Voted to accept:</b></p>
    <ul>
      {{#each acceptVoters}}
        <li>{{name}}</li>
      {{/each}}
    </ul>

    <p><b>Voted to reject:</b></p>
    <ul>
      {{#each rejectVoters}}
        <li>{{name}}</li>
      {{/each}}
    </ul>
  {{/if}}
</template>
